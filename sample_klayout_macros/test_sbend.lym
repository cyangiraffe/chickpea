<?xml version="1.0" encoding="utf-8"?>
<klayout-macro>
 <description/>
 <version/>
 <category>pymacros</category>
 <prolog/>
 <epilog/>
 <doc/>
 <autorun>false</autorun>
 <autorun-early>false</autorun-early>
 <shortcut/>
 <show-in-menu>false</show-in-menu>
 <group-name/>
 <menu-path/>
 <interpreter>python</interpreter>
 <dsl-interpreter-name/>
 <text># This script generates a directional coupler.
#
# Revision History:
#   Julian Sanders  25 Jun 2019 Initial Revision
#   Julian Sanders  28 Jun 2019 Debugging
#   Julian Sanders  05 Jul 2019 Updated for package name change to
#                               'chickpea' and added generation of
#                               3D FDTD script.

import pya    # Module containing KLayout API
from chickpea import couplers
from chickpea import paths

# For debugging chickpea without exiting KLayout
from importlib import reload
reload(couplers)
reload(paths)

layout = pya.Layout()               # create new layout
top = layout.create_cell("TOP")     # create top-level cell
rib = layout.layer(1, 0)            # create rib waveguide layer

bend = paths.s_bend(layout, bend_radius=30, bend_angle=1e-6, seg_length=0.1)
print(paths.s_bend_path_length(bend_radius=30, bend_angle=1e-6))
print(bend.length())

top.shapes(rib).insert(bend)

layout.write("C:/Users/julli/OneDrive - " 
   + "California Institute of Technology/"
   + "Research/gds_models/dir_couplers/shallow_bend.gds")</text>
</klayout-macro>
